# 考试编排系统

## 说明
这是一个基于PyQt5的考试编排系统，用于管理和安排考试。

## 运行说明

### 推荐运行方式

使用`start_app.py`启动程序：

```bash
python start_app.py
```

这是推荐的启动方式，它包含了完整的登录流程和用户界面初始化。

### 调试运行方式

1. 使用`main.py`运行完整程序：

```bash
python main.py
```

2. 使用`minimal_app.py`只运行登录界面：

```bash
python minimal_app.py
```

3. 直接测试教师视图：

```bash
python ui/simple_teacher_view.py
```

## 常见问题解决

如果遇到登录后报错，可能是以下原因：

1. **数据库连接错误**：检查数据库文件是否完整
2. **SQL查询条件错误**：程序已包含多种备选查询，以适应数据库结构可能的变化
3. **用户权限问题**：检查用户角色是否正确

## 系统角色说明

系统包含三种用户角色：

1. **管理员(admin)**：可以审核教师的考场调整申请，管理整个系统
2. **教师(teacher)**：可以查看和申请调整自己的考试安排
3. **排课员(scheduler)**：负责编排和管理考试安排

## 默认账户

- 管理员账户：admin / admin123

## 开发者信息

如有问题，请联系系统管理员。

## 系统概述
这是一个使用PyQt5开发的考试编排系统，用于高校考试安排。系统支持课程导入、教室配置、自动排考场、考场调整等功能。

## 主要功能
1. **简化登录注册**：系统提供单一注册入口，默认注册为教师角色，登录不需选择角色
2. **数据导入与显示**：支持导入课程表和教室配置，并在界面上直观显示
3. **智能排课**：
   - 老师平时在哪个教室上课就在哪个教室考试
   - 考试人数超过教室容量时自动分场次安排
   - 教室时间满时会智能查找同类型（同楼层或同建筑）的替代教室
4. **自定义考试设置**：支持自定义考试日期范围和每日场次数量（4或5场）
5. **考场调整**：教师可申请调整考场，管理员审核

## 使用说明
1. **登录/注册**：首次使用请先注册账号
2. **导入数据**：
   - 点击"导入课程表"导入课程信息（Excel格式）
   - 点击"导入实验室配置"导入教室信息（Excel格式）
3. **排课**：
   - 点击"自动排考场"，设置考试日期范围和每日场次
   - 完成排课后，考试安排会自动显示在右侧表格中
4. **导出考场**：点击"导出考场"将排课结果导出为Excel文件
5. **调整考场**：选择要调整的考试安排，点击"调整考场"进行修改

## 技术实现
- 前端：PyQt5
- 数据库：SQLite
- 数据处理：Pandas

## 系统改进
本系统最近进行了以下改进：
1. 简化了登录流程，删除了角色选择，默认注册为教师
2. 改进了界面布局，导入文件时在左侧显示导入的表格内容
3. 优化了排课算法，优先使用教师常用教室，支持容量不足时分场次
4. 添加了考试设置功能，支持自定义考试日期范围和每日场次数量
5. 修复了SQL查询问题，优化了数据库关联 